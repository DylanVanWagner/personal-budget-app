<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>budget manager</title>
    <link rel="stylesheet" href="/main.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
  </head>

  <body>
    <!--website banner-->
    <div class="container-fluid" id="banner">
      <div class="container" id="head-content">
        <div id="web-graphic"></div>
        <div id="head-title">
          <h1>Budget Manager</h1>
          <h4>manage your personal budget</h4>
        </div>
      </div>
    </div>

    <!--navigation menu-->
    <nav class="navbar navbar-inverse" id="menubar">
      <div class="container-fluid" id="navbar">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Budget Manager</a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li id="login">
            <a href="login.html"
              ><span class="glyphicon glyphicon-log-in"></span> Logout</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="homepage.html">Dashboard</a></li>
          <li id="contact"><a href="#">Contact</a></li>
        </ul>
      </div>
    </nav>

    <!-- <div class="container" id="dash-container">
      <div class="row">
        <div class="btn-group">
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Select chart <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li><a href="#">Pie chart</a></li>
            <li><a href="#">Bar chart</a></li>
          </ul>
        </div>
        <canvas id="myChart" , width="400" , height="400"></canvas>
      </div>
      <div class="row">ashfdljk</div>
      <div class="row">ashfdljk</div>
    </div> -->

    <div class="container" id="dash-container">
      <div class="canvas-holder">
        <h1 id="container-title">Budget Tracker</h1>
        <div class="chart-details">
          <hr style="width: 100%" />
          <h4>
            Monthly Income:
            <p id="income-total">$0</p>
          </h4>
          <hr style="width: 100%" />
          <h4>
            Monthly Expenses:
            <p id="expenses-total">$0</p>
          </h4>
          <hr style="width: 100%" />
          <h4>
            Savings:
            <p id="savings-total">$0</p>
          </h4>
          <hr style="width: 100%" />
        </div>
        <div class="chart-info">
          <canvas id="myChart" width="100" height="100"></canvas>
        </div>
      </div>
      <div id="information">
        <div class="row">
          <header>
            Income
          </header>
          <input type="number" placeholder="total income" id="total-income"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Living and Housing
          </header>
          <input type="number" placeholder="rent" id="rent"/>
          <input type="number" placeholder="property tax" id="property-tax"/>
          <input type="number" placeholder="utilities" id="utilities"/>
          <br><br>
          <input type="number" placeholder="groceries" id="groceries"/>
          <input type="number" placeholder="other" id="living-other"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Health
          </header>
          <input type="number" placeholder="health insurance" id="health-insurance"/>
          <input type="number" placeholder="medical expenses" id="medical-expenses"/>
          <input type="number" placeholder="other" id="health-other"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Transportation
          </header>
          <input type="number" placeholder="loans" id="auto-loan"/>
          <input type="number" placeholder="insurance" id="auto-insurance"/>
          <input type="number" placeholder="fuel" id="auto-fuel"/>
          <br><br>
          <input type="number" placeholder="maintenance" id="auto-maintenance"/>
          <input type="number" placeholder="other" id="auto-other"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Education
          </header>
          <input type="number" placeholder="tuition" id="tuition"/>
          <input type="number" placeholder="fees" id="education-fees"/>
          <input type="number" placeholder="supplies" id="education-supplies"/>
          <br><br>
          <input type="number" placeholder="other" id="education-other"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Other Expenses
          </header>
          <input type="number" placeholder="entertainment" id="expenses-entertainment"/>
          <input type="number" placeholder="clothing" id="expenses-clothing"/>
          <input type="number" placeholder="personal care" id="expenses-pcare"/>
          <br><br>
          <input type="number" placeholder="other" id="expenses-other"/>
          <br><br>
          <hr>
        </div>
        <div class="row">
          <header>
            Savings
          </header>
          <input type="number" placeholder="total savings" id="total-savings"/>
          <input type="number" placeholder="investments" id="savings-investments"/>
          <input type="number" placeholder="other" id="savings-other"/>
          <br><br>
        </div>
      </div>
    </div>

    <div class="bottom">
        <div class="center">
            Dylan Van Wagner
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>
    
    <script>
        // var dataSource = {
        //     datasets: [
        //         {
        //             data: [],
        //             backgroundColor: [],
        //         }
        //     ],
        //     labels: []
        // };

        var dataSource = {
        datasets: [
          {
            data: [400, 200, 400, 200, 500, 120, 100, 130],
            backgroundColor: [
              "#ffcd56",
              "#ff6384",
              "#36a2eb",
              "#fd6b19",
              "#2a5296",
              "#6e3aa6",
              "#e31b1b",
              "#2ec747",
            ],
          },
        ],
        labels: [
          "Taxes",
          "Loans",
          "Groceries",
          "Entertainment",
          "House Bill",
          "Car Bill",
          "Electric Bill",
          "Water Bill",
        ],
      };

        function createChart() {
            var ctx = document.getElementById('myChart').getContext('2d');
            var myPieChart = new Chart(ctx, {
                type: 'pie',
                data: dataSource
            });
            var myLineChart = new Chart(ctx, {
                type: 'line',
                data: dataSource
            });
            var myBarGraph = new Chart(ctx, {
                type: 'bar',
                data: dataSource
            })
            getBudget();
        }
        
        function getBudget() {
            axios.get('http://localhost:3000/mongo_nodejs')
            .then(function (res) {
                console.log(res);
                for (var i = 0; i < res.data.length; i++) {
                    dataSource.datasets[0].data[i] = res.data[i].related_value;
                    dataSource.datasets[0].backgroundColor[i] = res.data[i].color;
                    dataSource.labels[i] = res.data[i].title;
                }
                createChart();
            });
        }
        getBudget();
    </script>
</body>
<!-- This is a Semantic HTML Change -->
<footer>
    <div class = "bottom">
        <div class="center">
            Edited by Dylan Van Wagner
        </div>
    </div>
</footer>
</html>